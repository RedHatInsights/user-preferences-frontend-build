"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[542],{69677:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(4942),a=r(87462),c=r(45987),s=r(15861),l=r(29439),i=r(87757),o=r.n(i),u=r(77865),m=r.n(u),p=r(61084),f=r(89235),d=r(86350),E=r(48716),h=r(39173),b=r(57849),v=r(62176),Z=r(81797),g=r(25091),w=r(20679),y=r(78668),O=r(74209),x=r(56455);const j=function(e){var t=(0,u.useState)(!1),r=(0,l.Z)(t,2),n=r[0],a=r[1];return(0,u.useEffect)((function(){(0,s.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:a(!0);case 3:case"end":return t.stop()}}),t)})))()}),[]),n},k=function(){var e=insights.chrome.getEnvironment(),t=insights.chrome.isProd?"":"".concat("ci"===e?"qa":e,"."),r=function(){var e=(0,u.useState)({}),t=(0,l.Z)(e,2),r=t[0],n=t[1];return{isLoaded:j((0,s.Z)(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:t=e.sent,r=t.identity,n(r.user);case 5:case"end":return e.stop()}}),e)})))),currentUser:r}}(),n=r.isLoaded,a=r.currentUser;return m().createElement(b.Card,{className:"pref-email__info",ouiaId:"user-pref-info-card"},m().createElement(b.CardHeader,null,m().createElement(b.TextContent,null,m().createElement(b.Text,{component:b.TextVariants.h2},"Your information"))),m().createElement(b.CardBody,null,m().createElement(b.DataList,null,m().createElement(b.DataListItem,null,m().createElement(b.DataListItemRow,null,m().createElement(b.DataListItemCells,{className:"pref-u-condensed",dataListCells:[m().createElement(b.DataListCell,{isFilled:!1,className:"pref-c-title pref-u-bold pref-u-condensed",key:"email-title"},"Email address"),m().createElement(b.DataListCell,{isFilled:!0,key:"email-value",className:"pref-email__info-user-email pref-u-condensed"},n?m().createElement(u.Fragment,null,m().createElement("span",{className:"pf-u-mr-md"},a.email),m().createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.".concat(t,"redhat.com/wapps/ugc/protected/emailChange.html")},"Not correct?")):m().createElement(x.Z,{size:"lg"}))]}))))))};var C=r(17812),S=["unsubscribe"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const D=function(){var e,t=(0,p.useDispatch)(),r=(0,u.useState)({}),i=(0,l.Z)(r,2),x=i[0],N=i[1],D=j((0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:return(0,C.z2)(C.jP),e.t0=N,e.next=6,(0,y.vF)(g,t);case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))),P=(0,p.useSelector)((function(e){return e.emailPreferences})),L=function(){var e=(0,s.Z)(o().mark((function e(r){var n,a,s,i,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.unsubscribe,n=(0,c.Z)(r,S),a=Object.entries(x).filter((function(e){return!0===(0,l.Z)(e,2)[1].isVisible})).map((function(e){var r,a,c=(0,l.Z)(e,2),s=c[0],i=c[1],o=i.localFile,u=i.schema,m=i.url,p=i.apiName;if(!o&&!u&&null!=P&&null!==(r=P[s])&&void 0!==r&&r.schema&&Object.keys(null==P||null===(a=P[s])||void 0===a?void 0:a.schema).length>0){var f=(0,w.fj)({application:s,values:n,url:m,apiName:p});return t(f),{promise:f.payload,meta:f.meta}}})).filter(Boolean),e.next=4,(0,y.d9)(a);case 4:s=e.sent,i=s.success,u=s.error,(0,y.Sp)(t,i,u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m().createElement(m().Fragment,null,m().createElement(E.Z,null,m().createElement(h.Z,{title:"Email preferences"})),m().createElement(d.Z,{className:"pref-email"},m().createElement(b.Stack,{hasGutter:!0},m().createElement(b.StackItem,null,m().createElement(k,null)),m().createElement(b.StackItem,null,m().createElement(b.Card,{ouiaId:"user-pref-email-subscriptions-card"},m().createElement(b.CardHeader,{className:"pf-u-pb-0"},m().createElement(b.TextContent,null,m().createElement(b.Text,{component:b.TextVariants.h2},"Email subscriptions"),m().createElement(b.Text,{component:b.TextVariants.p},"Select the emails you want to receive."))),m().createElement(b.CardBody,{className:"pref-email_form"},D?m().createElement(v.Z,{componentMapper:_(_({},f.YS),{},(e={},(0,n.Z)(e,Z.L5,Z.eU),(0,n.Z)(e,Z.gI,Z.aN),(0,n.Z)(e,Z.GZ,Z.RN),e)),FormTemplate:function(e){return m().createElement(f._U,(0,a.Z)({},e,{FormButtons:O.Z}))},schema:{fields:[{name:"email-preferences",component:Z.GZ,sections:Object.entries(x).map((function(e){var t,r,n=(0,l.Z)(e,2);return t=n[0],r=n[1],(0,y.If)(t,r,null==P?void 0:P[t],(function(e){var r=(0,a.Z)({},x);!1===e?delete r[t]:r[t]=_(_({},r[t]),{},{isVisible:e}),N(r)}))}))}]},onSubmit:L}):m().createElement(b.Bullseye,null,m().createElement(b.Spinner,null))))))))}}}]);
//# sourceMappingURL=../sourcemaps/Email.bbc2a4b04d0e4106ddddd44791d11978.js.map