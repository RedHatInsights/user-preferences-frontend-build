(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[542],{41195:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(94015),n=a.n(r),i=a(23645),l=a.n(i)()(n());l.push([e.id,".email .pref-email .pref-email__subs-info{padding-bottom:0}.email .pref-email .pf-c-data-list{border:0}.email .pref-email .pf-c-data-list .pref-c-title{min-width:155px;max-width:155px}.email .pref-email .pf-c-data-list .pf-c-data-list__item:last-of-type{border:0}.email .pref-email .pf-c-data-list .pf-c-data-list__item-content.pref-u-condensed{padding-top:0;padding-bottom:0}.email .pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*{padding-bottom:var(--pf-global--spacer--md)}.email .pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*:last-child{padding-bottom:0}.email .pref-email .pf-c-data-list .pf-c-data-list__item-row{padding-left:0}.email .pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:19px}.email .pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:var(--pf-global--gutter)}.email .pref-email .pref-u-bold{font-weight:var(--pf-global--FontWeight--bold)}.email .pref-email div.pref-u-condensed{padding-top:var(--pf-global--spacer--sm);padding-bottom:0}.email .pref-email .pref-email__form-button{margin-right:16px}@media screen and (max-width: 768px){.email .pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:0}.email .pref-email .pf-c-data-list .pref-email__info-user-email.pf-c-data-list__cell span{padding-bottom:var(--pf-global--spacer--sm)}.email .pref-email .pf-c-data-list .pref-email__info-user-email>*{display:block}.email .pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:0}.email .pref-email .pref-email__info .pf-c-card__body .pf-l-flex>div:first-of-type{flex-grow:0;flex-basis:100%}.email .pref-email .pref-email__info .pf-c-card__body .pf-l-flex .pref-email_loader span{margin-left:0}.email .pref-email .pf-c-data-list__item:last-of-type .pf-c-data-list__cell:last-of-type{padding-top:var(--pf-global--spacer--lg)}.email .pref-email ul.pf-c-data-list .pf-c-data-list__item div.pf-c-data-list__cell.pref-u-condensed{padding-top:0;padding-bottom:0}}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/Email/email.scss"],names:[],mappings:"AAAA,0CACmC,gBAAgB,CADnD,mCACgF,QAAQ,CADxF,iDACmI,eAAe,CAAC,eAAe,CADlK,sEACkO,QAAQ,CAD1O,kFACsT,aAAa,CAAC,gBAAgB,CADpV,yFACua,2CAA2C,CADld,oGACgjB,gBAAgB,CADhkB,6DACunB,cAAc,CADroB,gEAC+rB,iBAAiB,CADhtB,kEAC4wB,qCAAqC,CADjzB,gCAC20B,8CAA8C,CADz3B,wCAC25B,wCAAwC,CAAC,gBAAgB,CADp9B,4CAC0/B,iBAAiB,CAAC,qCAD5gC,gEAC0mC,cAAc,CADxnC,0FAC4sC,2CAA2C,CADvvC,kEACmzC,aAAa,CADh0C,kEAC43C,cAAc,CAD14C,mFACu9C,WAAW,CAAC,eAAe,CADl/C,yFACqkD,aAAa,CADllD,yFACqqD,wCAAwC,CAD7sD,qGAC4yD,aAAa,CAAC,gBAAgB,CAAE",sourcesContent:[".email{\n.pref-email .pref-email__subs-info{padding-bottom:0}.pref-email .pf-c-data-list{border:0}.pref-email .pf-c-data-list .pref-c-title{min-width:155px;max-width:155px}.pref-email .pf-c-data-list .pf-c-data-list__item:last-of-type{border:0}.pref-email .pf-c-data-list .pf-c-data-list__item-content.pref-u-condensed{padding-top:0;padding-bottom:0}.pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*{padding-bottom:var(--pf-global--spacer--md)}.pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*:last-child{padding-bottom:0}.pref-email .pf-c-data-list .pf-c-data-list__item-row{padding-left:0}.pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:19px}.pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:var(--pf-global--gutter)}.pref-email .pref-u-bold{font-weight:var(--pf-global--FontWeight--bold)}.pref-email div.pref-u-condensed{padding-top:var(--pf-global--spacer--sm);padding-bottom:0}.pref-email .pref-email__form-button{margin-right:16px}@media screen and (max-width: 768px){.pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:0}.pref-email .pf-c-data-list .pref-email__info-user-email.pf-c-data-list__cell span{padding-bottom:var(--pf-global--spacer--sm)}.pref-email .pf-c-data-list .pref-email__info-user-email>*{display:block}.pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:0}.pref-email .pref-email__info .pf-c-card__body .pf-l-flex>div:first-of-type{flex-grow:0;flex-basis:100%}.pref-email .pref-email__info .pf-c-card__body .pf-l-flex .pref-email_loader span{margin-left:0}.pref-email .pf-c-data-list__item:last-of-type .pf-c-data-list__cell:last-of-type{padding-top:var(--pf-global--spacer--lg)}.pref-email ul.pf-c-data-list .pf-c-data-list__item div.pf-c-data-list__cell.pref-u-condensed{padding-top:0;padding-bottom:0}}\n\n}"],sourceRoot:""}]);const s=l},71617:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var r,n=a(96156),i=a(22122),l=a(81253),s=a(92137),c=a(28481),o=a(87757),p=a.n(o),f=a(77865),m=a.n(f),d=(a(97869),a(61084)),u=a(5627),g=a(86350),_=a(48716),b=a(39173),v=a(96315),A=a(82476),h=a(1598),C=a(54084),y=a(66516),w=a(85061),E=a(56455),x=[{fields:[{component:h.gI}]}],O=a(83215);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k,Z,B=function(e){return e&&e.loaded?e.schema:x},P=(k=j(j({},null===(r=insights.chrome)||void 0===r?void 0:r.visibilityFunctions),{},{hasLoosePermissions:(Z=(0,s.Z)(p().mark((function e(){var t,a,r=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],e.next=3,insights.chrome.getUserPermissions();case 3:return a=e.sent,e.abrupt("return",t.some((function(e){return null==a?void 0:a.find((function(t){return t.permission===e}))})));case 5:case"end":return e.stop()}}),e)}))),function(){return Z.apply(this,arguments)})}),j(j({},k),Object.fromEntries(Object.keys(k).map((function(e){return["!".concat(e),function(){return!k[e].apply(k,arguments)}]}))))),N=function(e){return Promise.all([e].flat().map((function(e){var t,a=e.method,r=e.args;return null==P||null===(t=P[a])||void 0===t?void 0:t.call.apply(t,[P].concat((0,w.Z)(r||[])))}))).then((function(e){return e.every(Boolean)}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"email-preference":{}},t=e["email-preference"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Object.entries(t).map((function(e){var t=(0,c.Z)(e,2),i=t[0],o=t[1],f=o.permissions,m=o.url,d=o.apiName,u=o.apiVersion,g=o.localFile,_=(0,l.Z)(o,["permissions","url","apiName","apiVersion","localFile"]),b=!f||N(f);return(0,s.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(b);case 2:if(!e.sent){e.next=12;break}if(!g){e.next=11;break}return e.next=7,a(40118)("./".concat(g));case 7:t=e.sent.default,r((0,y.Re)({schema:t,application:i})),e.next=12;break;case 11:r((0,y.Re)({application:i,url:m,apiName:d,apiVersion:u}));case 12:case"end":return e.stop()}}),e)})))(),(0,n.Z)({},i,j({localFile:g,isVisible:b,url:m,apiName:d,apiVersion:u},_))})).reduce((function(e,t){return j(j({},e),t)}),{})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"".concat(e.slice(0,e.length-(e.length>1)).join(", ")).concat(e.length>=2?" and ".concat(e[e.length-1]):"")},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.allSettled(e.map((function(e){return e.promise}))).then((function(t){return t.reduce((function(t,a,r){var i,l,s=a.value;return j(j({},t),{},(0,n.Z)({},s?"success":"error",[].concat((0,w.Z)(t[s?"success":"error"]),[null===(i=e[r])||void 0===i||null===(l=i.meta)||void 0===l?void 0:l.title])))}),{success:[],error:[]})}))},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];0!==a.length&&0!==t.length&&(e((0,O.wN)({dismissable:!1,variant:"success",title:"Email preferences for ".concat(S(t)," successfully saved")})),e((0,O.wN)({dismissable:!1,variant:"danger",title:"Email preferences for ".concat(S(a)," unsuccessfully saved")}))),0===a.length&&0!==t.length&&e((0,O.wN)({dismissable:!1,variant:"success",title:"Preferences successfully saved"})),0!==a.length&&0===t.length&&e((0,O.wN)({dismissable:!1,variant:"danger",title:"Preferences unsuccessfully saved"}))},T=a(15418);const I=function(e){var t=(0,f.useState)(!1),a=(0,c.Z)(t,2),r=a[0],n=a[1];return(0,f.useEffect)((function(){(0,s.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n(!0);case 3:case"end":return t.stop()}}),t)})))()}),[]),r},U=function(){var e=insights.chrome.getEnvironment(),t=insights.chrome.isProd?"":"".concat("ci"===e?"qa":e,"."),a=function(){var e=(0,f.useState)({}),t=(0,c.Z)(e,2),a=t[0],r=t[1];return{isLoaded:I((0,s.Z)(p().mark((function e(){var t,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:t=e.sent,a=t.identity,r(a.user);case 5:case"end":return e.stop()}}),e)})))),currentUser:a}}(),r=a.isLoaded,n=a.currentUser;return m().createElement(v.Card,{className:"pref-email__info",ouiaId:"user-pref-info-card"},m().createElement(v.CardHeader,null,m().createElement(v.TextContent,null,m().createElement(v.Text,{component:v.TextVariants.h2},"Your information"))),m().createElement(v.CardBody,null,m().createElement(v.DataList,null,m().createElement(v.DataListItem,null,m().createElement(v.DataListItemRow,null,m().createElement(v.DataListItemCells,{className:"pref-u-condensed",dataListCells:[m().createElement(v.DataListCell,{isFilled:!1,className:"pref-c-title pref-u-bold pref-u-condensed",key:"email-title"},"Email address"),m().createElement(v.DataListCell,{isFilled:!0,key:"email-value",className:"pref-email__info-user-email pref-u-condensed"},r?m().createElement(f.Fragment,null,m().createElement("span",{className:"pf-u-mr-md"},n.email),m().createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.".concat(t,"redhat.com/wapps/ugc/protected/emailChange.html")},"Not correct?")):m().createElement(E.Z,{size:"lg"}))]}))))))};var q=a(98876);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const R=function(){var e,t=(0,d.useDispatch)(),a=(0,f.useState)({}),r=(0,c.Z)(a,2),o=r[0],w=r[1],O=I((0,s.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:return(0,q.z2)(q.jP),e.t0=w,e.next=6,F(C,t);case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))),D=(0,d.useSelector)((function(e){return e.emailPreferences})),j=function(){var e=(0,s.Z)(p().mark((function e(a){var r,n,i,s,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.unsubscribe,r=(0,l.Z)(a,["unsubscribe"]),n=Object.entries(o).filter((function(e){return!0===(0,c.Z)(e,2)[1].isVisible})).map((function(e){var a,n,i=(0,c.Z)(e,2),l=i[0],s=i[1],o=s.localFile,p=s.schema,f=s.url,m=s.apiName;if(!o&&!p&&null!=D&&null!==(a=D[l])&&void 0!==a&&a.schema&&Object.keys(null==D||null===(n=D[l])||void 0===n?void 0:n.schema).length>0){var d=(0,y.fj)({application:l,values:r,url:f,apiName:m});return t(d),{promise:d.payload,meta:d.meta}}})).filter(Boolean),e.next=4,V(n);case 4:i=e.sent,s=i.success,f=i.error,L(t,s,f);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m().createElement(m().Fragment,null,m().createElement(_.Z,null,m().createElement(b.Z,{title:"Email preferences"})),m().createElement(g.Z,{className:"pref-email"},m().createElement(v.Stack,{hasGutter:!0},m().createElement(v.StackItem,null,m().createElement(U,null)),m().createElement(v.StackItem,null,m().createElement(v.Card,{ouiaId:"user-pref-email-subscriptions-card"},m().createElement(v.CardHeader,{className:"pf-u-pb-0"},m().createElement(v.TextContent,null,m().createElement(v.Text,{component:v.TextVariants.h2},"Email subscriptions"),m().createElement(v.Text,{component:v.TextVariants.p},"Select the cloud.redhat.com emails you want to receive."))),m().createElement(v.CardBody,{className:"pref-email_form"},O?m().createElement(A.Z,{componentMapper:G(G({},u.YS),{},(e={},(0,n.Z)(e,h.L5,h.eU),(0,n.Z)(e,h.gI,h.aN),(0,n.Z)(e,h.GZ,h.RN),e)),FormTemplate:function(e){return m().createElement(u._U,(0,i.Z)({},e,{FormButtons:T.Z}))},schema:{fields:[{name:"email-preferences",component:h.GZ,sections:Object.entries(o).map((function(e){var t=(0,c.Z)(e,2);return function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return!0===t.isVisible?{label:null==t?void 0:t.title,name:e,fields:(null==t?void 0:t.fields)||B(a)}:(Promise.resolve(t.isVisible).then(r),{label:m().createElement(E.Z,null),name:e,fields:x})}(e,t,null==D?void 0:D[e],(function(t){var a=(0,i.Z)({},o);!1===t?delete a[e]:a[e]=G(G({},a[e]),{},{isVisible:t}),w(a)}))}(t[0],t[1])}))}]},onSubmit:j}):m().createElement(v.Bullseye,null,m().createElement(v.Spinner,null))))))))}},97869:(e,t,a)=>{"use strict";var r=a(93379),n=a.n(r),i=a(41195),l=n()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var s=i.default.locals;e.hot.accept(41195,(t=>{i=a(41195),function(e,t,a){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(s,i.default.locals)?(s=i.default.locals,l(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){l()})),i.default.locals},40118:(e,t,a)=>{var r={"./config.json":[54084],"./data/general.json":[11636,636],"./data/unsubscribe.json":[58132,132]};function n(e){if(!a.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],n=t[0];return Promise.all(t.slice(1).map(a.e)).then((()=>a.t(n,3)))}n.keys=()=>Object.keys(r),n.id=40118,e.exports=n}}]);
//# sourceMappingURL=Email.a2653c484c555da5c24e.js.map