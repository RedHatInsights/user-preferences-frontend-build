(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[542],{41195:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var i=a(94015),r=a.n(i),n=a(23645),l=a.n(n)()(r());l.push([e.id,".email .pref-email .pref-email__subs-info{padding-bottom:0}.email .pref-email .pf-c-data-list{border:0}.email .pref-email .pf-c-data-list .pref-c-title{min-width:155px;max-width:155px}.email .pref-email .pf-c-data-list .pf-c-data-list__item:last-of-type{border:0}.email .pref-email .pf-c-data-list .pf-c-data-list__item-content.pref-u-condensed{padding-top:0;padding-bottom:0}.email .pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*{padding-bottom:var(--pf-global--spacer--md)}.email .pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*:last-child{padding-bottom:0}.email .pref-email .pf-c-data-list .pf-c-data-list__item-row{padding-left:0}.email .pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:19px}.email .pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:var(--pf-global--gutter)}.email .pref-email .pref-u-bold{font-weight:var(--pf-global--FontWeight--bold)}.email .pref-email div.pref-u-condensed{padding-top:var(--pf-global--spacer--sm);padding-bottom:0}.email .pref-email .pref-email__form-button{margin-right:16px}@media screen and (max-width: 768px){.email .pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:0}.email .pref-email .pf-c-data-list .pref-email__info-user-email.pf-c-data-list__cell span{padding-bottom:var(--pf-global--spacer--sm)}.email .pref-email .pf-c-data-list .pref-email__info-user-email>*{display:block}.email .pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:0}.email .pref-email .pref-email__info .pf-c-card__body .pf-l-flex>div:first-of-type{flex-grow:0;flex-basis:100%}.email .pref-email .pref-email__info .pf-c-card__body .pf-l-flex .pref-email_loader span{margin-left:0}.email .pref-email .pf-c-data-list__item:last-of-type .pf-c-data-list__cell:last-of-type{padding-top:var(--pf-global--spacer--lg)}.email .pref-email ul.pf-c-data-list .pf-c-data-list__item div.pf-c-data-list__cell.pref-u-condensed{padding-top:0;padding-bottom:0}}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/Email/email.scss"],names:[],mappings:"AAAA,0CACmC,gBAAgB,CADnD,mCACgF,QAAQ,CADxF,iDACmI,eAAe,CAAC,eAAe,CADlK,sEACkO,QAAQ,CAD1O,kFACsT,aAAa,CAAC,gBAAgB,CADpV,yFACua,2CAA2C,CADld,oGACgjB,gBAAgB,CADhkB,6DACunB,cAAc,CADroB,gEAC+rB,iBAAiB,CADhtB,kEAC4wB,qCAAqC,CADjzB,gCAC20B,8CAA8C,CADz3B,wCAC25B,wCAAwC,CAAC,gBAAgB,CADp9B,4CAC0/B,iBAAiB,CAAC,qCAD5gC,gEAC0mC,cAAc,CADxnC,0FAC4sC,2CAA2C,CADvvC,kEACmzC,aAAa,CADh0C,kEAC43C,cAAc,CAD14C,mFACu9C,WAAW,CAAC,eAAe,CADl/C,yFACqkD,aAAa,CADllD,yFACqqD,wCAAwC,CAD7sD,qGAC4yD,aAAa,CAAC,gBAAgB,CAAE",sourcesContent:[".email{\n.pref-email .pref-email__subs-info{padding-bottom:0}.pref-email .pf-c-data-list{border:0}.pref-email .pf-c-data-list .pref-c-title{min-width:155px;max-width:155px}.pref-email .pf-c-data-list .pf-c-data-list__item:last-of-type{border:0}.pref-email .pf-c-data-list .pf-c-data-list__item-content.pref-u-condensed{padding-top:0;padding-bottom:0}.pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*{padding-bottom:var(--pf-global--spacer--md)}.pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*:last-child{padding-bottom:0}.pref-email .pf-c-data-list .pf-c-data-list__item-row{padding-left:0}.pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:19px}.pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:var(--pf-global--gutter)}.pref-email .pref-u-bold{font-weight:var(--pf-global--FontWeight--bold)}.pref-email div.pref-u-condensed{padding-top:var(--pf-global--spacer--sm);padding-bottom:0}.pref-email .pref-email__form-button{margin-right:16px}@media screen and (max-width: 768px){.pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:0}.pref-email .pf-c-data-list .pref-email__info-user-email.pf-c-data-list__cell span{padding-bottom:var(--pf-global--spacer--sm)}.pref-email .pf-c-data-list .pref-email__info-user-email>*{display:block}.pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:0}.pref-email .pref-email__info .pf-c-card__body .pf-l-flex>div:first-of-type{flex-grow:0;flex-basis:100%}.pref-email .pref-email__info .pf-c-card__body .pf-l-flex .pref-email_loader span{margin-left:0}.pref-email .pf-c-data-list__item:last-of-type .pf-c-data-list__cell:last-of-type{padding-top:var(--pf-global--spacer--lg)}.pref-email ul.pf-c-data-list .pf-c-data-list__item div.pf-c-data-list__cell.pref-u-condensed{padding-top:0;padding-bottom:0}}\n\n}"],sourceRoot:""}]);const s=l},69346:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var i,r=a(96156),n=a(22122),l=a(81253),s=a(92137),o=a(28481),c=a(87757),p=a.n(c),f=a(77865),m=a.n(f),d=(a(97869),a(61084)),u=a(5627),g=a(86350),A=a(48716),b=a(39173),_=a(96315),v=a(82476),C=a(1598),h=a(54084),y=a(66516),w=a(85061),O=a(56455),x=[{fields:[{component:C.gI}]}],D=a(83215);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B,Z,k=function(e){return e&&e.loaded?e.schema:x},P=(B=j(j({},null===(i=insights.chrome)||void 0===i?void 0:i.visibilityFunctions),{},{hasLoosePermissions:(Z=(0,s.Z)(p().mark((function e(){var t,a,i=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:[],e.next=3,insights.chrome.getUserPermissions();case 3:return a=e.sent,e.abrupt("return",t.some((function(e){return null==a?void 0:a.find((function(t){return t.permission===e}))})));case 5:case"end":return e.stop()}}),e)}))),function(){return Z.apply(this,arguments)})}),j(j({},B),Object.fromEntries(Object.keys(B).map((function(e){return["!".concat(e),function(){return!B[e].apply(B,arguments)}]}))))),F=function(e){return Promise.all([e].flat().map((function(e){var t,a=e.method,i=e.args;return null==P||null===(t=P[a])||void 0===t?void 0:t.call.apply(t,[P].concat((0,w.Z)(i||[])))}))).then((function(e){return e.every(Boolean)}))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"email-preference":{}},t=e["email-preference"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Object.entries(t).map((function(e){var t=(0,o.Z)(e,2),n=t[0],c=t[1],f=c.permissions,m=c.url,d=c.apiName,u=c.apiVersion,g=c.localFile,A=(0,l.Z)(c,["permissions","url","apiName","apiVersion","localFile"]),b=!f||F(f);return(0,s.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(b);case 2:if(!e.sent){e.next=12;break}if(!g){e.next=11;break}return e.next=7,a(40118)("./".concat(g));case 7:t=e.sent.default,i((0,y.Re)({schema:t,application:n})),e.next=12;break;case 11:i((0,y.Re)({application:n,url:m,apiName:d,apiVersion:u}));case 12:case"end":return e.stop()}}),e)})))(),(0,r.Z)({},n,j({localFile:g,isVisible:b,url:m,apiName:d,apiVersion:u},A))})).reduce((function(e,t){return j(j({},e),t)}),{})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"".concat(e.slice(0,e.length-(e.length>1)).join(", ")).concat(e.length>=2?" and ".concat(e[e.length-1]):"")},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.allSettled(e.map((function(e){return e.promise}))).then((function(t){return t.reduce((function(t,a,i){var n,l,s=a.value;return j(j({},t),{},(0,r.Z)({},s?"success":"error",[].concat((0,w.Z)(t[s?"success":"error"]),[null===(n=e[i])||void 0===n||null===(l=n.meta)||void 0===l?void 0:l.title])))}),{success:[],error:[]})}))},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];0!==a.length&&0!==t.length&&(e((0,D.wN)({dismissable:!1,variant:"success",title:"Email preferences for ".concat(S(t)," successfully saved")})),e((0,D.wN)({dismissable:!1,variant:"danger",title:"Email preferences for ".concat(S(a)," unsuccessfully saved")}))),0===a.length&&0!==t.length&&e((0,D.wN)({dismissable:!1,variant:"success",title:"Preferences successfully saved"})),0!==a.length&&0===t.length&&e((0,D.wN)({dismissable:!1,variant:"danger",title:"Preferences unsuccessfully saved"}))},q=a(15418),I=a(3711),U=a(50185),G=a(98876);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const R=function(){var e,t=(0,d.useDispatch)(),a=(0,f.useState)({}),i=(0,o.Z)(a,2),c=i[0],w=i[1],D=(0,U.Z)((0,s.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:return(0,G.z2)(G.jP),e.t0=w,e.next=6,N(h,t);case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))),E=(0,d.useSelector)((function(e){return e.emailPreferences})),j=function(){var e=(0,s.Z)(p().mark((function e(a){var i,r,n,s,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.unsubscribe,i=(0,l.Z)(a,["unsubscribe"]),r=Object.entries(c).filter((function(e){return!0===(0,o.Z)(e,2)[1].isVisible})).map((function(e){var a,r,n=(0,o.Z)(e,2),l=n[0],s=n[1],c=s.localFile,p=s.schema,f=s.url,m=s.apiName;if(!c&&!p&&null!=E&&null!==(a=E[l])&&void 0!==a&&a.schema&&Object.keys(null==E||null===(r=E[l])||void 0===r?void 0:r.schema).length>0){var d=(0,y.fj)({application:l,values:i,url:f,apiName:m});return t(d),{promise:d.payload,meta:d.meta}}})).filter(Boolean),e.next=4,V(r);case 4:n=e.sent,s=n.success,f=n.error,T(t,s,f);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m().createElement(m().Fragment,null,m().createElement(A.Z,null,m().createElement(b.Z,{title:"Email preferences"})),m().createElement(g.Z,{className:"pref-email"},m().createElement(_.Stack,{hasGutter:!0},m().createElement(_.StackItem,null,m().createElement(I.Z,null)),m().createElement(_.StackItem,null,m().createElement(_.Card,{ouiaId:"user-pref-email-subscriptions-card"},m().createElement(_.CardHeader,{className:"pf-u-pb-0"},m().createElement(_.TextContent,null,m().createElement(_.Text,{component:_.TextVariants.h2},"Email subscriptions"),m().createElement(_.Text,{component:_.TextVariants.p},"Select the cloud.redhat.com emails you want to receive."))),m().createElement(_.CardBody,{className:"pref-email_form"},D?m().createElement(v.Z,{componentMapper:Q(Q({},u.YS),{},(e={},(0,r.Z)(e,C.L5,C.eU),(0,r.Z)(e,C.gI,C.aN),(0,r.Z)(e,C.GZ,C.RN),e)),FormTemplate:function(e){return m().createElement(u._U,(0,n.Z)({},e,{FormButtons:q.Z}))},schema:{fields:[{name:"email-preferences",component:C.GZ,sections:Object.entries(c).map((function(e){var t=(0,o.Z)(e,2);return function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return!0===t.isVisible?{label:null==t?void 0:t.title,name:e,fields:(null==t?void 0:t.fields)||k(a)}:(Promise.resolve(t.isVisible).then(i),{label:m().createElement(O.Z,null),name:e,fields:x})}(e,t,null==E?void 0:E[e],(function(t){var a=(0,n.Z)({},c);!1===t?delete a[e]:a[e]=Q(Q({},a[e]),{},{isVisible:t}),w(a)}))}(t[0],t[1])}))}]},onSubmit:j}):m().createElement(_.Bullseye,null,m().createElement(_.Spinner,null))))))))}},97869:(e,t,a)=>{"use strict";var i=a(93379),r=a.n(i),n=a(41195),l=r()(n.default,{insert:"head",singleton:!1});if(!n.default.locals||e.hot.invalidate){var s=n.default.locals;e.hot.accept(41195,(t=>{n=a(41195),function(e,t,a){if(!e&&t||e&&!t)return!1;var i;for(i in e)if(e[i]!==t[i])return!1;for(i in t)if(!e[i])return!1;return!0}(s,n.default.locals)?(s=n.default.locals,l(n.default)):e.hot.invalidate()}))}e.hot.dispose((function(){l()})),n.default.locals},40118:(e,t,a)=>{var i={"./config.json":[54084],"./data/general.json":[11636,636],"./data/unsubscribe.json":[58132,132]};function r(e){if(!a.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return Promise.all(t.slice(1).map(a.e)).then((()=>a.t(r,3)))}r.keys=()=>Object.keys(i),r.id=40118,e.exports=r}}]);
//# sourceMappingURL=Email.956206ca46a707cb2d0d.js.map