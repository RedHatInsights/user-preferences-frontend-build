(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[542],{41195:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(94015),n=r.n(a),i=r(23645),l=r.n(i)()(n());l.push([e.id,".user-preferences .pref-email .pref-email__subs-info{padding-bottom:0}.user-preferences .pref-email .pf-c-data-list{border:0}.user-preferences .pref-email .pf-c-data-list .pref-c-title{min-width:155px;max-width:155px}.user-preferences .pref-email .pf-c-data-list .pf-c-data-list__item:last-of-type{border:0}.user-preferences .pref-email .pf-c-data-list .pf-c-data-list__item-content.pref-u-condensed{padding-top:0;padding-bottom:0}.user-preferences .pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*{padding-bottom:var(--pf-global--spacer--md)}.user-preferences .pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*:last-child{padding-bottom:0}.user-preferences .pref-email .pf-c-data-list .pf-c-data-list__item-row{padding-left:0}.user-preferences .pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:19px}.user-preferences .pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:var(--pf-global--gutter)}.user-preferences .pref-email .pref-u-bold{font-weight:var(--pf-global--FontWeight--bold)}.user-preferences .pref-email div.pref-u-condensed{padding-top:var(--pf-global--spacer--sm);padding-bottom:0}.user-preferences .pref-email .pref-email__form-button{margin-right:16px}@media screen and (max-width: 768px){.user-preferences .pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:0}.user-preferences .pref-email .pf-c-data-list .pref-email__info-user-email.pf-c-data-list__cell span{padding-bottom:var(--pf-global--spacer--sm)}.user-preferences .pref-email .pf-c-data-list .pref-email__info-user-email>*{display:block}.user-preferences .pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:0}.user-preferences .pref-email .pref-email__info .pf-c-card__body .pf-l-flex>div:first-of-type{flex-grow:0;flex-basis:100%}.user-preferences .pref-email .pref-email__info .pf-c-card__body .pf-l-flex .pref-email_loader span{margin-left:0}.user-preferences .pref-email .pf-c-data-list__item:last-of-type .pf-c-data-list__cell:last-of-type{padding-top:var(--pf-global--spacer--lg)}.user-preferences .pref-email ul.pf-c-data-list .pf-c-data-list__item div.pf-c-data-list__cell.pref-u-condensed{padding-top:0;padding-bottom:0}}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/Email/email.scss"],names:[],mappings:"AAAA,qDACmC,gBAAgB,CADnD,8CACgF,QAAQ,CADxF,4DACmI,eAAe,CAAC,eAAe,CADlK,iFACkO,QAAQ,CAD1O,6FACsT,aAAa,CAAC,gBAAgB,CADpV,oGACua,2CAA2C,CADld,+GACgjB,gBAAgB,CADhkB,wEACunB,cAAc,CADroB,2EAC+rB,iBAAiB,CADhtB,6EAC4wB,qCAAqC,CADjzB,2CAC20B,8CAA8C,CADz3B,mDAC25B,wCAAwC,CAAC,gBAAgB,CADp9B,uDAC0/B,iBAAiB,CAAC,qCAD5gC,2EAC0mC,cAAc,CADxnC,qGAC4sC,2CAA2C,CADvvC,6EACmzC,aAAa,CADh0C,6EAC43C,cAAc,CAD14C,8FACu9C,WAAW,CAAC,eAAe,CADl/C,oGACqkD,aAAa,CADllD,oGACqqD,wCAAwC,CAD7sD,gHAC4yD,aAAa,CAAC,gBAAgB,CAAE",sourcesContent:[".user-preferences{\n.pref-email .pref-email__subs-info{padding-bottom:0}.pref-email .pf-c-data-list{border:0}.pref-email .pf-c-data-list .pref-c-title{min-width:155px;max-width:155px}.pref-email .pf-c-data-list .pf-c-data-list__item:last-of-type{border:0}.pref-email .pf-c-data-list .pf-c-data-list__item-content.pref-u-condensed{padding-top:0;padding-bottom:0}.pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*{padding-bottom:var(--pf-global--spacer--md)}.pref-email .pf-c-data-list .pf-c-data-list__item-content .pf-c-data-list__cell>*:last-child{padding-bottom:0}.pref-email .pf-c-data-list .pf-c-data-list__item-row{padding-left:0}.pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:19px}.pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:var(--pf-global--gutter)}.pref-email .pref-u-bold{font-weight:var(--pf-global--FontWeight--bold)}.pref-email div.pref-u-condensed{padding-top:var(--pf-global--spacer--sm);padding-bottom:0}.pref-email .pref-email__form-button{margin-right:16px}@media screen and (max-width: 768px){.pref-email .pf-c-data-list .pref-email__info-user-email{padding-left:0}.pref-email .pf-c-data-list .pref-email__info-user-email.pf-c-data-list__cell span{padding-bottom:var(--pf-global--spacer--sm)}.pref-email .pf-c-data-list .pref-email__info-user-email>*{display:block}.pref-email .pf-c-data-list .pref-email__info-user-email a{padding-left:0}.pref-email .pref-email__info .pf-c-card__body .pf-l-flex>div:first-of-type{flex-grow:0;flex-basis:100%}.pref-email .pref-email__info .pf-c-card__body .pf-l-flex .pref-email_loader span{margin-left:0}.pref-email .pf-c-data-list__item:last-of-type .pf-c-data-list__cell:last-of-type{padding-top:var(--pf-global--spacer--lg)}.pref-email ul.pf-c-data-list .pf-c-data-list__item div.pf-c-data-list__cell.pref-u-condensed{padding-top:0;padding-bottom:0}}\n\n}"],sourceRoot:""}]);const s=l},69346:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>R});var a,n=r(96156),i=r(22122),l=r(81253),s=r(92137),c=r(28481),p=r(87757),o=r.n(p),f=r(77865),d=r.n(f),u=(r(97869),r(61084)),m=r(5627),g=r(86350),A=r(48716),b=r(39173),_=r(96315),v=r(82476),C=r(1598),h=r(54084),y=r(66516),w=r(85061),O=r(56455),x=[{fields:[{component:C.gI}]}],D=r(83215);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B,Z,P=function(e){return e&&e.loaded?e.schema:x},k=(B=j(j({},null===(a=insights.chrome)||void 0===a?void 0:a.visibilityFunctions),{},{hasLoosePermissions:(Z=(0,s.Z)(o().mark((function e(){var t,r,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.next=3,insights.chrome.getUserPermissions();case 3:return r=e.sent,e.abrupt("return",t.some((function(e){return null==r?void 0:r.find((function(t){return t.permission===e}))})));case 5:case"end":return e.stop()}}),e)}))),function(){return Z.apply(this,arguments)})}),j(j({},B),Object.fromEntries(Object.keys(B).map((function(e){return["!".concat(e),function(){return!B[e].apply(B,arguments)}]}))))),N=function(e){return Promise.all([e].flat().map((function(e){var t,r=e.method,a=e.args;return null==k||null===(t=k[r])||void 0===t?void 0:t.call.apply(t,[k].concat((0,w.Z)(a||[])))}))).then((function(e){return e.every(Boolean)}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"email-preference":{}},t=e["email-preference"],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Object.entries(t).map((function(e){var t=(0,c.Z)(e,2),i=t[0],p=t[1],f=p.permissions,d=p.url,u=p.apiName,m=p.apiVersion,g=p.localFile,A=(0,l.Z)(p,["permissions","url","apiName","apiVersion","localFile"]),b=!f||N(f);return(0,s.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(b);case 2:if(!e.sent){e.next=12;break}if(!g){e.next=11;break}return e.next=7,r(40118)("./".concat(g));case 7:t=e.sent.default,a((0,y.Re)({schema:t,application:i})),e.next=12;break;case 11:a((0,y.Re)({application:i,url:d,apiName:u,apiVersion:m}));case 12:case"end":return e.stop()}}),e)})))(),(0,n.Z)({},i,j({localFile:g,isVisible:b,url:d,apiName:u,apiVersion:m},A))})).reduce((function(e,t){return j(j({},e),t)}),{})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"".concat(e.slice(0,e.length-(e.length>1)).join(", ")).concat(e.length>=2?" and ".concat(e[e.length-1]):"")},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.allSettled(e.map((function(e){return e.promise}))).then((function(t){return t.reduce((function(t,r,a){var i,l,s=r.value;return j(j({},t),{},(0,n.Z)({},s?"success":"error",[].concat((0,w.Z)(t[s?"success":"error"]),[null===(i=e[a])||void 0===i||null===(l=i.meta)||void 0===l?void 0:l.title])))}),{success:[],error:[]})}))},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];0!==r.length&&0!==t.length&&(e((0,D.wN)({dismissable:!1,variant:"success",title:"Email preferences for ".concat(S(t)," successfully saved")})),e((0,D.wN)({dismissable:!1,variant:"danger",title:"Email preferences for ".concat(S(r)," unsuccessfully saved")}))),0===r.length&&0!==t.length&&e((0,D.wN)({dismissable:!1,variant:"success",title:"Preferences successfully saved"})),0!==r.length&&0===t.length&&e((0,D.wN)({dismissable:!1,variant:"danger",title:"Preferences unsuccessfully saved"}))},G=r(15418),T=r(3711),I=r(50185),U=r(98876);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const R=function(){var e,t=(0,u.useDispatch)(),r=(0,f.useState)({}),a=(0,c.Z)(r,2),p=a[0],w=a[1],D=(0,I.Z)((0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,U.z2)(U.jP),e.t0=w,e.next=4,F(h,t);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))),E=(0,u.useSelector)((function(e){return e.emailPreferences})),j=function(){var e=(0,s.Z)(o().mark((function e(r){var a,n,i,s,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.unsubscribe,a=(0,l.Z)(r,["unsubscribe"]),n=Object.entries(p).filter((function(e){return!0===(0,c.Z)(e,2)[1].isVisible})).map((function(e){var r,n,i=(0,c.Z)(e,2),l=i[0],s=i[1],p=s.localFile,o=s.schema,f=s.url,d=s.apiName;if(!p&&!o&&null!=E&&null!==(r=E[l])&&void 0!==r&&r.schema&&Object.keys(null==E||null===(n=E[l])||void 0===n?void 0:n.schema).length>0){var u=(0,y.fj)({application:l,values:a,url:f,apiName:d});return t(u),{promise:u.payload,meta:u.meta}}})).filter(Boolean),e.next=4,V(n);case 4:i=e.sent,s=i.success,f=i.error,q(t,s,f);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d().createElement(d().Fragment,null,d().createElement(A.Z,null,d().createElement(b.Z,{title:"Email preferences"})),d().createElement(g.Z,{className:"pref-email"},d().createElement(_.Stack,{hasGutter:!0},d().createElement(_.StackItem,null,d().createElement(T.Z,null)),d().createElement(_.StackItem,null,d().createElement(_.Card,{ouiaId:"user-pref-email-subscriptions-card"},d().createElement(_.CardHeader,{className:"pf-u-pb-0"},d().createElement(_.TextContent,null,d().createElement(_.Text,{component:_.TextVariants.h2},"Email subscriptions"),d().createElement(_.Text,{component:_.TextVariants.p},"Select the cloud.redhat.com emails you want to receive."))),d().createElement(_.CardBody,{className:"pref-email_form"},D?d().createElement(v.Z,{componentMapper:Q(Q({},m.YS),{},(e={},(0,n.Z)(e,C.L5,C.eU),(0,n.Z)(e,C.gI,C.aN),(0,n.Z)(e,C.GZ,C.RN),e)),FormTemplate:function(e){return d().createElement(m._U,(0,i.Z)({},e,{FormButtons:G.Z}))},schema:{fields:[{name:"email-preferences",component:C.GZ,sections:Object.entries(p).map((function(e){var t=(0,c.Z)(e,2);return function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return!0===t.isVisible?{label:null==t?void 0:t.title,name:e,fields:(null==t?void 0:t.fields)||P(r)}:(Promise.resolve(t.isVisible).then(a),{label:d().createElement(O.Z,null),name:e,fields:x})}(e,t,null==E?void 0:E[e],(function(t){var r=(0,i.Z)({},p);!1===t?delete r[e]:r[e]=Q(Q({},r[e]),{},{isVisible:t}),w(r)}))}(t[0],t[1])}))}]},onSubmit:j}):d().createElement(_.Bullseye,null,d().createElement(_.Spinner,null))))))))}},97869:(e,t,r)=>{"use strict";var a=r(93379),n=r.n(a),i=r(41195),l=n()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var s=i.default.locals;e.hot.accept(41195,(t=>{i=r(41195),function(e,t,r){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(s,i.default.locals)?(s=i.default.locals,l(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){l()})),i.default.locals},40118:(e,t,r)=>{var a={"./config.json":[54084],"./data/general.json":[11636,636],"./data/unsubscribe.json":[58132,132]};function n(e){if(!r.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return Promise.all(t.slice(1).map(r.e)).then((()=>r.t(n,3)))}n.keys=()=>Object.keys(a),n.id=40118,e.exports=n}}]);
//# sourceMappingURL=Email.d7478419e4a1c277de27.js.map